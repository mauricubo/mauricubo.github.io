<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width"><link rel=icon type=image/ico href=https://www.mauricubo.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.mauricubo.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.mauricubo.com/favicon-32x32.png><link rel=icon type=image/png sizes=192x192 href=https://www.mauricubo.com/android-chrome-192x192.png><link rel=apple-touch-icon sizes=180x180 href=https://www.mauricubo.com/apple-touch-icon.png><meta name=description content="Setup Netdata on Microk8s"><title>Install Netdata on Microk8s | My debug.log</title><link rel=canonical href=https://www.mauricubo.com/posts/netdata-on-microk8s/><meta property="og:url" content="https://www.mauricubo.com/posts/netdata-on-microk8s/"><meta property="og:site_name" content="My debug.log"><meta property="og:title" content="Install Netdata on Microk8s"><meta property="og:description" content="Setup Netdata on Microk8s"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-01-14T00:00:00+00:00"><meta property="article:modified_time" content="2024-01-14T00:00:00+00:00"><meta property="article:tag" content="Netdata"><meta property="article:tag" content="Kubernetes"><meta property="article:tag" content="Microk8s"><meta property="article:tag" content="Monitoring"><link rel=stylesheet href=/assets/combined.min.0bb5c6a8600843314a93a3d2555c08ab9ac68d78fbf44d18a372e5b490269344.css media=all></head><body class=dark><div class=content><header><div class=header></div></header><main class=main><div class=breadcrumbs><a href=/>Home</a><span class=breadcrumbs-separator>/</span><a href=/posts/>Posts</a><span class=breadcrumbs-separator>/</span>
<a href=/posts/netdata-on-microk8s/>Install Netdata on Microk8s</a></div><div class=autonumber><article><header class=single-intro-container><h1 class=single-title>Install Netdata on Microk8s</h1><p class=single-summary>Setup Netdata on Microk8s</p><div class=single-subsummary><img src=/images/avatar.jpeg alt="Author Avatar"><div><p class=author>Mauricio</p><p class=single-date><time datetime=2024-01-14T00:00:00+00:00>14 Jan 2024</time>
&nbsp; · &nbsp;2 min read</p></div></div></header><div class=single-tags><span><a href=https://www.mauricubo.com/tags/netdata/>#Netdata</a>
</span><span><a href=https://www.mauricubo.com/tags/kubernetes/>#Kubernetes</a>
</span><span><a href=https://www.mauricubo.com/tags/microk8s/>#Microk8s</a>
</span><span><a href=https://www.mauricubo.com/tags/monitoring/>#Monitoring</a></span></div><aside class=toc><p><strong>Table of contents</strong></p><nav id=TableOfContents><ul><li><a href=#intro>Intro</a></li><li><a href=#enable-the-storage-plugin-on-our-microk8s-cluster>Enable the storage plugin on our microk8s cluster</a></li><li><a href=#install-netdata-usign-helm>Install netdata usign helm</a></li><li><a href=#publishing-the-webui>Publishing the WebUI</a></li></ul></nav></aside><div class=single-content><h2 class=heading id=intro>Intro
<a class=anchor href=#intro>#</a></h2><p><figure><div class=img-container><img loading=lazy alt src=/images/post4/Homeimage.png></div></figure></p><p>This post is a real quick note for myself…</p><p>I wanted to install <code>netdata</code> to monitoring my homeserver. I think that is the perfect tool for a real time information of your server. When I started to look for the best monitoring tool on the internet, everyone, literally, everyone suggested <code>grafana</code> with <code>prometheus</code>, which I then tried. I think that it is an amaizing tool with a high potential to do whatever you want, but it was not what I was looking for.</p><p>I knew about netdata form using it some years ago but I never used it again so I decided to install it and try again. But this time on my <code>microk8s</code> cluster .</p><p><a href=https://github.com/netdata/netdata>GitHub - netdata/netdata: Real-time performance monitoring, done right!</a></p><hr><h2 class=heading id=enable-the-storage-plugin-on-our-microk8s-cluster>Enable the storage plugin on our microk8s cluster
<a class=anchor href=#enable-the-storage-plugin-on-our-microk8s-cluster>#</a></h2><p>We need to enable the storage plugin so we can give the default storage class that netdata needs for provisioning the persistence of the database and statistics to the cluster. This step is not necessary on the cloud providers clusters because most of them already have the default storage class configured.</p><pre><code>$ microk8s enable storage
</code></pre><h2 class=heading id=install-netdata-usign-helm>Install netdata usign helm
<a class=anchor href=#install-netdata-usign-helm>#</a></h2><p>As the first step, we are going to install the tool using helm. So we add the repo to the helm repo.</p><pre><code>$ helm repo add netdata https://netdata.github.io/helmchart/
</code></pre><p>We create a special namespace for the monitoring tools and we install netdata.</p><pre><code>$ kubectl create namespace monitoring
$ helm install netdata netdata/netdata -n monitoring
</code></pre><hr><h2 class=heading id=publishing-the-webui>Publishing the WebUI
<a class=anchor href=#publishing-the-webui>#</a></h2><p>I have changed the default ingress configuration that comes with the default. You have 2 options to do this, the first one is to download the helm charts and modify the ingress part, or the second one (the one that I used for this configuration) is delete the ingress object and recreate it.</p><pre><code>$ kubectl delete ingress -n monitoring netdata
</code></pre><p>We create the ingress.yaml with this content…</p><pre><code>apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: netdata
  namespace: monitoring
  labels:
    app: netdata
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
spec:
  ingressClassName: nginx
  rules:
  - host: &quot;&lt;your_domain_name_here&gt;&quot;
    http:
      paths:
      - pathType: Prefix
        path: /
        backend:
          service:
            name: netdata
            port:
              number: 19999
</code></pre><p>And we create the object</p><pre><code>$ kubectl apply -f ingress.yaml
</code></pre><hr><p>Finally, we test if we have access to the UI…</p></div></article><div class=single-pagination><hr><div class=flexnowrap><div class=single-pagination-prev></div><div class=single-pagination-next><div class=single-pagination-container-next><div class=single-pagination-text><a href=/posts/my-first-post/>Welcome to My Blog!</a></div><div class=single-pagination-text>→</div></div></div></div><hr></div><div class=back-to-top><a href=#top>back to top</a></div></div></main></div><footer><p><strong>Malpuin</strong> site - Powered by <strong><a href=https://gohugo.io/>Hugo</a></strong> and <strong><a href=https://github.com/tomfran/typo>tomfran/typo</a></strong></p></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script></body><script src=/js/theme-switch.js></script><script defer src=/js/copy-code.js></script></html>